{% extends "gallery/base_gallery.html" %}

{% block gallery_content %}
<!-- Hero Section -->
<section class="hero-section position-relative overflow-hidden">
    <!-- Simplified Animated Background for Mobile -->
    <div class="hero-shape-1"></div>
    <div class="d-none d-md-block">
        <div class="hero-shape-2"></div>
        <div class="hero-shape-3"></div>
    </div>
    
    <div class="container position-relative">
        <div class="row align-items-center py-4 py-md-5">
            <div class="col-12 col-lg-6 mb-4 mb-lg-0">
                <div class="hero-content text-center text-lg-start px-3 px-md-0">
                    <h1 class="display-5 display-lg-3 fw-bold mb-3 mb-md-4 text-white">Capture & Share <span class="text-warning">Your World</span></h1>
                    <p class="text-white-80 mb-3 mb-md-4">Showcase your photography and connect with artists worldwide.</p>
                    
                    <div class="d-flex flex-wrap gap-2 gap-md-3 justify-content-center justify-content-lg-start">
                        {% if user.is_authenticated %}
                            <a href="{% url 'gallery:upload' %}" class="btn btn-light btn-md btn-lg-md px-3 px-md-4 py-2 py-md-3 fw-bold">
                                <i class="fas fa-cloud-upload-alt me-1 me-md-2"></i>
                                <span class="d-none d-sm-inline">Upload </span>Photo
                            </a>
                            <a href="#gallery" class="btn btn-outline-light btn-md btn-lg-md px-3 px-md-4 py-2 py-md-3 fw-bold">
                                <i class="fas fa-images me-1 me-md-2"></i>
                                <span class="d-none d-sm-inline">Explore </span>Gallery
                            </a>
                        {% else %}
                            <a href="{% url 'users:register' %}" class="btn btn-warning btn-md btn-lg-md px-3 px-md-4 py-2 py-md-3 fw-bold text-white">
                                <i class="fas fa-rocket me-1 me-md-2"></i>
                                Get Started
                            </a>
                            <a href="#gallery" class="btn btn-outline-light btn-md btn-lg-md px-3 px-md-4 py-2 py-md-3 fw-bold">
                                <i class="fas fa-images me-1 me-md-2"></i>
                                <span class="d-none d-sm-inline">Explore </span>Gallery
                            </a>
                        {% endif %}
                    </div>
                    
                    <div class="mt-4 text-white-60 d-none d-sm-block">
                        <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start gap-3 gap-md-4">
                            <div class="d-flex align-items-center">
                                <div class="me-2">
                                    <i class="fas fa-users fa-lg fa-2x text-warning"></i>
                                </div>
                                <div>
                                    <div class="fw-bold">10K+</div>
                                    <small class="d-none d-md-inline">Community</small>
                                    <small class="d-md-none">Members</small>
                                </div>
                            </div>
                            <div class="vr text-white-30 d-none d-md-inline"></div>
                            <div class="d-flex align-items-center">
                                <div class="me-2">
                                    <i class="fas fa-image fa-lg fa-2x text-warning"></i>
                                </div>
                                <div>
                                    <div class="fw-bold">50K+</div>
                                    <small>Photos Shared</small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-12 col-lg-6 mt-4 mt-lg-0">
                <div class="hero-image-container position-relative">
                    <div class="hero-image-main">
                        <img src="https://source.unsplash.com/random/800x600?nature,photography" alt="Nature Photography" class="img-fluid rounded-4 shadow-lg w-100">
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Simplified Scroll Down Indicator -->
    <div class="scroll-down d-none d-md-block">
        <a href="#gallery" class="text-white">
            <i class="fas fa-chevron-down"></i>
        </a>
    </div>
</section>

<!-- Featured Photos Section -->
<section id="gallery" class="py-4 py-md-5">
    <div class="container">
        <div class="d-flex justify-content-between align-items-center mb-5">
            <h2 class="h3 mb-0">Latest Photos</h2>
            {% if photos %}
                <a href="#gallery" class="btn btn-outline-primary">
                    View All <i class="fas fa-arrow-right ms-1"></i>
                </a>
            {% endif %}
        </div>

        {% if photos %}
            <div id="gallery" class="row g-4">
                {% for photo in photos %}
                <div class="col-12 col-sm-6 col-lg-4 col-xl-3">
                    <div class="card photo-card h-100">
                        <div class="photo-img-container">
                            <img src="{{ photo.image.url }}" class="photo-img" alt="{{ photo.title }}">
                            <div class="photo-meta">
                                <h5 class="mb-0">{{ photo.title|truncatechars:30 }}</h5>
                                <small>By {{ photo.user.username }}</small>
                            </div>
                        </div>
                        <div class="card-body">
                            <p class="card-text text-muted small">
                                {{ photo.description|truncatechars:100|default:"No description provided" }}
                            </p>
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    <i class="far fa-clock me-1"></i> {{ photo.date_posted|timesince }} ago
                                </small>
                                <a href="{% url 'gallery:photo_detail' photo.id %}" class="btn btn-sm btn-outline-primary">
                                    View
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            
            <!-- Pagination -->
            {% if is_paginated %}
            <nav aria-label="Photo pagination" class="mt-5">
                <ul class="pagination justify-content-center">
                    {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page=1" aria-label="First">
                                <span aria-hidden="true">&laquo;&laquo;</span>
                            </a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link">&laquo;&laquo;</span>
                        </li>
                        <li class="page-item disabled">
                            <span class="page-link">&laquo;</span>
                        </li>
                    {% endif %}
                    
                    {% for num in page_obj.paginator.page_range %}
                        {% if page_obj.number == num %}
                            <li class="page-item active">
                                <span class="page-link">{{ num }} <span class="sr-only">(current)</span></span>
                            </li>
                        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                            <li class="page-item">
                                <a class="page-link" href="?page={{ num }}">{{ num }}</a>
                            </li>
                        {% endif %}
                    {% endfor %}
                    
                    {% if page_obj.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                            </a>
                        </li>
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.paginator.num_pages }}" aria-label="Last">
                                <span aria-hidden="true">&raquo;&raquo;</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link">&raquo;</span>
                        </li>
                        <li class="page-item disabled">
                            <span class="page-link">&raquo;&raquo;</span>
                        </li>
                    {% endif %}
                </ul>
            </nav>
            {% endif %}
            
        {% else %}
            <div class="text-center py-5">
                <div class="feature-icon text-primary mb-3">
                    <i class="fas {% if user.is_authenticated %}fa-images{% else %}fa-lock{% endif %}"></i>
                </div>
                <h3 class="h4 mb-3">
                    {% if user.is_authenticated %}
                        You haven't uploaded any photos yet!
                    {% else %}
                        Welcome to Your Personal Gallery
                    {% endif %}
                </h3>
                <p class="text-muted mb-4">
                    {% if user.is_authenticated %}
                        Start by uploading your first photo to your personal collection.
                    {% else %}
                        Please log in to view and manage your personal photo collection.
                    {% endif %}
                </p>
                {% if user.is_authenticated %}
                    <a href="{% url 'gallery:upload' %}" class="btn btn-primary">
                        <i class="fas fa-upload me-2"></i>Upload Your First Photo
                    </a>
                {% else %}
                    <div class="d-flex justify-content-center gap-3">
                        <a href="{% url 'users:login' %}" class="btn btn-primary">
                            <i class="fas fa-sign-in-alt me-2"></i>Log In
                        </a>
                        <a href="{% url 'users:register' %}" class="btn btn-outline-primary">
                            <i class="fas fa-user-plus me-2"></i>Sign Up
                        </a>
                    </div>
                {% endif %}
            </div>
        {% endif %}
    </div>
</section>

<!-- Features Section -->
<section class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center mb-5">Why Choose Our Gallery?</h2>
        <div class="row g-4">
            <div class="col-md-4">
                <div class="text-center p-4">
                    <div class="feature-icon text-primary">
                        <i class="fas fa-upload"></i>
                    </div>
                    <h3 class="h5">Easy Upload</h3>
                    <p class="text-muted mb-0">Quickly upload and share your favorite moments with our simple interface.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center p-4">
                    <div class="feature-icon text-primary">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3 class="h5">Join Our Community</h3>
                    <p class="text-muted mb-0">Connect with photographers and photography enthusiasts from around the world.</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="text-center p-4">
                    <div class="feature-icon text-primary">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3 class="h5">Mobile Friendly</h3>
                    <p class="text-muted mb-0">Access your photos and the gallery from any device, anywhere, anytime.</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}